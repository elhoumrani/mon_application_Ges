{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
      name="viewport"
    />

    <!-- Fonts and icons -->
   

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />    
    <link rel="stylesheet" href="{% static 'css/kaiadmin.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/dash1.css' %}" />
  </head>
  <body>
    <div class="wrapper">
      <!-- Sidebar -->
      <div class="sidebar" style="background-color:rgba(75, 77, 160, 1) ;">
        <div class="sidebar-head">
            <img src="{% static '/img/1737195769624.jpg' %}" style="width: 45px; height: 45px;" alt="" >
            <h3>GesCaisse</h3>
        </div>
        <div class="items">
            <li><a href="{% url 'payment_index' %}">Payement</a></li>
            <li><a href="{% url 'inscription_index' %}">Inscription</a></li>
            <li><a href="{% url 'eleve_index' %}">Eleve</a></li>
            <li><a href="{% url 'formation_index' %}">Classe</a></li>
            <li><a href="{% url 'dash_board' %}">Dashboard</a></li>
        </div>
      </div> 
      
      <!-- End Sidebar -->

      <div class="main-panel">
        <div class="main-header">

          <!-- Navbar Header -->
          <nav
            class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom"
          >
            <div class="container-fluid">
                <div class="recherche">
                    
                    <a href="{% url 'create_user' %}"><img src="{% static '/img/Ellipse 1 (2).png' %}" width="25px" height="25px"></a>
                </div>
                <div class="image">
                    <div class="dropdown">
                        <button class="dropbtn">Menu</button>
                        <div class="dropdown-content">
                            <a href="#">compte</a>
                            <a href="#">logout</a>
                        </div>
                    </div>
                </div>
            </div>
          </nav>
          <!-- End Navbar -->
        </div>

        <div class="container">
          <div class="page-inner">
            <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row pt-2 pb-4">
              <div>
                <h3 class="fw-bold mb-3">Intendents</h3>
              </div>
              
            </div>
           
            <div class="row">
              
              <div class="col-md-12">
                <div class="card card-round">
                  <div class="card-header">
                    <div class="card-head-row card-tools-still-right">
                      
                    </div>
                  </div>
                  <div class="card-body p-0">
                    <div class="table-responsive">
                      <!-- Projects table -->
                      <table class="table align-items-center mb-0">
                        <thead class="thead-light">
                          <tr>
                            <th scope="col">Username</th>
                            <th scope="col">E-mail</th>
                            <th scope="col">Date de creation</th>
                            <th scope="col">Active</th>
                            <th scope="col">Dernier login</th>
                            <th scope="col">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                        {% for i in users %}
                          <tr>
                            <td scope="row">{{i.username}}</td>
                            <td> {{ i.email}}</td>
                            <td scope="row">{{ i.date_joined }}</td>
                            <td><span class="etat">{{ i.is_active }}</span></td>
                            <td> {{ i.last_login}}</td>
                            <td>
                              <a href="{% url 'desactiver_user' id=i.id %}" class="desactiver">Désactiver</a>
                              <a href="{% url 'activer_user' id=i.id %}" class="activer" style="display: none;">Activer</a>
                            </td>
                          </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> 
      </div>  
      
  <script>
  document.addEventListener('DOMContentLoaded', function () {
  const rows = document.querySelectorAll('tbody tr'); // Sélectionnez toutes les lignes du tableau

  rows.forEach(row => {
    const etat = row.querySelector('.etat'); // Sélectionnez l'élément "etat" dans cette ligne
    const activeState = row.querySelector('.activer'); // Sélectionnez le lien "activer"
    const desactiveState = row.querySelector('.desactiver'); // Sélectionnez le lien "desactiver"

    if (etat.textContent.trim() === 'False') {
      activeState.style.display = 'block';
      desactiveState.style.display = 'none';
    } else if (etat.textContent.trim() === 'True') {
      activeState.style.display = 'none';
      desactiveState.style.display = 'block';
    }
  });
});
</script>
</body>
</html>
